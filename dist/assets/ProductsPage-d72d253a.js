var B=Object.defineProperty;var N=(s,t,n)=>t in s?B(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var p=(s,t,n)=>(N(s,typeof t!="symbol"?t+"":t,n),n);import{e as k,f as m,g,d as f,j as e,B as j,a as P,G as A,n as h,h as C,A as w,S as D,F,c as U}from"./index-8389bfe9.js";import{q,u as S,I as E,E as b,a as G,S as y,b as R,c as V,d as T,e as W,f as H,g as L,F as M}from"./index-d0ae40ee.js";import{S as K}from"./Seo-552cc6e6.js";import{u as v,T as O,I as Q}from"./use-form-8ee320fd.js";import"./Paper-f69f1702.js";const X="g",J="h",Y={row:X,products:J};class ${constructor(t){p(this,"id");p(this,"name");p(this,"createdAt");p(this,"updatedAt");this.id=t.id,this.name=t.name,this.createdAt=k.formatDate(t.createdAt),this.updatedAt=k.formatDate(t.updatedAt)}}const x={getProductsList:s=>m.Get(`${g.products}?${q.stringify(s)}`,{transformData:t=>({...t,data:t.data.map(n=>new $(n))})}),getProducts:s=>m.Get(`${g.products}/${s}`,{transformData:t=>new $(t)}),createProducts:s=>m.Post(g.products,s),updateProducts:(s,t)=>m.Put(`${g.products}/${s}`,t),deleteProducts:s=>m.Delete(`${g.products}/${s}`)},Z=({onSuccess:s})=>{const[t,{open:n,close:d}]=S(!1),{loading:c,send:i}=f(a=>x.createProducts(a),{immediate:!1}),o=v({initialValues:{name:""},validate:{name:a=>a.length?null:"name not empty"}}),l=a=>{o.onSubmit(r=>{i(r).then(()=>{h.show({message:"Create success!",color:"green"}),s()}).catch(u=>{console.log("error",u),h.show({message:C(u,"message","Something went wrong, please try again later!"),color:"red"})}).finally(()=>{d(),o.reset()})})(a)};return e.jsxs(j,{children:[e.jsx(P,{fullWidth:!0,leftIcon:e.jsx(E,{}),onClick:n,children:"Create"}),e.jsx(b,{opened:t,onClose:()=>{d(),o.reset()},title:"Create new Products",children:e.jsx(j,{mx:"auto",w:"100%",children:e.jsxs("form",{onSubmit:l,children:[e.jsx(O,{withAsterisk:!0,label:"Name",placeholder:"enter name",...o.getInputProps("name")}),e.jsx(A,{position:"right",mt:"md",children:e.jsx(P,{disabled:c,type:"submit",children:"Submit"})})]})})})]})},_=[{label:"Name",key:"name"},{label:"Create At",key:"createdAt"},{label:"Update At",key:"updatedAt"}],ee=({data:s})=>{const[t,{open:n,close:d}]=S(!1),{loading:c,data:i}=f(()=>x.getProducts(s==null?void 0:s.id),{immediate:!0});return e.jsxs(e.Fragment,{children:[e.jsx(w,{color:"green",onClick:n,children:e.jsx(G,{size:16})}),e.jsx(b,{opened:t,onClose:d,title:`Detail [${s==null?void 0:s.name}]`,children:c?e.jsxs(D,{w:"100%",children:[e.jsx(y,{height:12,mt:6,width:"70%",radius:"xl"}),e.jsx(y,{height:12,radius:"xl"}),e.jsx(y,{height:12,mt:6,radius:"xl"})]}):e.jsx(D,{w:"100%",children:_.map(o=>e.jsxs(F,{justify:"space-between",children:[e.jsxs("span",{style:{fontWeight:"bold"},children:[o==null?void 0:o.label,":"]}),e.jsx("span",{children:i==null?void 0:i[o==null?void 0:o.key]})]},o.label))})})]})},se=({onSuccess:s,data:t})=>{const[n,{open:d,close:c}]=S(!1),{loading:i,send:o}=f(u=>x.updateProducts(t.id,u),{immediate:!1}),l=v({initialValues:{name:""},validate:{name:u=>u.length?null:"name not empty"}}),a=u=>{l.onSubmit(z=>{o(z).then(()=>{h.show({message:"Update success!",color:"green"}),s()}).catch(I=>{console.log("error",I),h.show({message:C(I,"message","Something went wrong, please try again later!"),color:"red"})}).finally(()=>{c(),l.reset()})})(u)},r=()=>{l.setValues({name:t.name}),d()};return e.jsxs(j,{children:[e.jsx(w,{color:"blue",onClick:r,children:e.jsx(R,{size:16})}),e.jsx(b,{opened:n,onClose:()=>{c(),l.reset()},title:`Update employee ${t.name}`,children:e.jsx(j,{mx:"auto",w:"100%",children:e.jsxs("form",{onSubmit:a,children:[e.jsx(O,{withAsterisk:!0,label:"Name",placeholder:"enter name",...l.getInputProps("name")}),e.jsx(A,{position:"right",mt:"md",children:e.jsx(P,{disabled:i,type:"submit",children:"Submit"})})]})})})]})},te=({data:s,onSuccess:t})=>{const[n,{open:d,close:c}]=S(!1),{loading:i,send:o}=f(a=>x.deleteProducts(a),{immediate:!1}),l=()=>{o(s==null?void 0:s.id).then(()=>{c(),t(),h.show({message:"Delete success!",color:"green"})}).catch(a=>{h.show({message:C(a,"message","Something went wrong, please try again later!"),color:"red"})})};return e.jsxs(e.Fragment,{children:[e.jsx(w,{color:"red",onClick:d,children:e.jsx(V,{size:16})}),e.jsx(b,{opened:n,onClose:c,title:`Delete ${s==null?void 0:s.name}`,children:e.jsx(P,{disabled:i,onClick:l,color:"red",children:"OK"})})]})},ne=U();function oe(s){const[t,n]=T(""),{loading:d,data:c,page:[i,o],total:l,refresh:a}=W((r,u)=>x.getProductsList({page:r,pageSize:u,q:t}),{watchingStates:[t],debounce:1e3,initialPage:1,initialPageSize:10,total:r=>r.total,data:r=>r.data,initialData:{page:1,pageSize:10,total:0,data:[]}});return e.jsxs("div",{className:ne(Y.products),children:["Products",e.jsx(K,{title:"Products",description:"Page generate for Products",type:"preview"}),e.jsx("h1",{children:"Products"}),e.jsxs(F,{gap:10,sx:{paddingBottom:12,alignItems:"center",justifyContent:"space-between"},children:[e.jsx(Q,{icon:e.jsx(H,{}),rightSection:t&&e.jsx(w,{onClick:()=>n(""),children:e.jsx(L,{size:16})}),placeholder:"Search ...",radius:"md",size:"sm",value:t,onChange:n}),e.jsx(Z,{onSuccess:()=>a(1)})]}),e.jsx(M,{withBorder:!0,borderRadius:"md",withColumnBorders:!0,striped:!0,minHeight:150,loaderVariant:"oval",page:i,onPageChange:r=>o(r),recordsPerPage:10,totalRecords:l,highlightOnHover:!0,fetching:d,records:c,columns:[{accessor:"index",title:"#",textAlignment:"right",width:40,render:r=>c.indexOf(r)+1},{accessor:"name"},{accessor:"createdAt"},{accessor:"updatedAt"},{accessor:"Actions",textAlignment:"right",render:r=>e.jsxs(A,{spacing:4,position:"right",noWrap:!0,children:[e.jsx(ee,{data:r}),e.jsx(se,{data:r,onSuccess:()=>a(1)}),e.jsx(te,{data:r,onSuccess:()=>a(1)})]})}]})]})}const ue=oe;export{ue as Component,oe as ProductsPage};
